{"id":152,"date":"2017-04-09T12:43:40","date_gmt":"2017-04-09T16:43:40","guid":{"rendered":"http:\/\/langstonsoftware.com\/?p=152"},"modified":"2024-01-30T19:09:16","modified_gmt":"2024-01-31T00:09:16","slug":"refactoring-is-the-key-step-in-writing-business-software","status":"publish","type":"post","link":"https:\/\/langstonsoftware.com\/2017\/04\/09\/refactoring-is-the-key-step-in-writing-business-software\/","title":{"rendered":"Refactoring Is the Key Step in Writing Business Software"},"content":{"rendered":"<p>I recently found a Reddit post from a sysadmin who had just finished their first C# app for work. They were ecstatic, happily telling their CTO about the daily work they had automated for the multiple technicians working under the sysadmin.<\/p>\n<p><em>Then the CTO happily replied with a few words that ruined the sysadmin&#8217;s day.<\/em> <\/p>\n<p>&#8220;Great! Put it in SVN.&#8221;<\/p>\n<p>(SVN &#8211; Subversion, the company&#8217;s developer source control repository)<\/p>\n<p>The sysadmin knew their first project wasn&#8217;t done &#8220;the right way&#8221;. No examples they&#8217;d seen outside of purely academic &#8220;Hello World&#8221; code looked like theirs. There were many full time C# developers at their company, who would be judging the quality of the sysadmin&#8217;s work and might be called on to maintain their code in the future. If they left the company, someone else would inherit the mess they had made. Reputation and karma were on the line.<\/p>\n<p>After deciding against asking the very busy developers at their company, and a crazy ex-employee buddy who wrote bad code, they turned with low expectations to Reddit in a desperate plea of a post.<\/p>\n<p>The problem this sysadmin had is one that is not unique. I&#8217;ve frequently been asked by college students what is the difference between academic example code and good production ready business software. In business writing, it would be editing. In programming?<\/p>\n<p><strong>Refactoring is the key step in writing business software.<\/strong><\/p>\n<p>Refactoring is extracting, renaming, reorganizing, and generally rewriting software until it is able to be easily understood, maintained, extended, and adapted. The sysadmin knew this and the students I&#8217;ve talked to already have some idea of it, but they don&#8217;t know how.  The sysadmin had already discovered that their code needed to be refactored, but just didn&#8217;t know how. They couldn&#8217;t unthink they way the thought about how to structure a program. Luckily our sysadmin&#8217;s post was not unanswered.<\/p>\n<p>When reading their code, it looked like a recipe out of a cookbook.<\/p>\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\r\nGet plates\r\n\r\nGet ingredient 1\r\nGet ingredient 2\r\nGet ingredient 3\r\n\r\nPrepare ingredient 1\r\nPrepare ingredient 2\r\nPrepare ingredient 3\r\n\r\nPlate\r\nCleanup\r\nServe<\/pre>\n<p>This is a common way software programs look when written by novice developers. It is logical and structured and&#8230; off. Writing or reading code in this formulaic way doesn&#8217;t scale beyond the simplest problems. Many senior developers would claim this program has &#8220;code smells&#8221;. It doesn&#8217;t fit their rubric of good business software.<\/p>\n<p>There were 3 techniques that many of the posters applied to refactoring the sysadmin&#8217;s code: Creating a table of contents, removing duplicated instructions, and never remembering more than required for the current task. I would agree that these techniques are the perfect place to start refactoring for beginning programmers.<\/p>\n<p>Here&#8217;s how the first, <strong>creating a table of contents<\/strong>, changes the appearance of the program:<\/p>\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\r\nGet plates\r\nGetIngredients()\r\nPrepareIngredients()\r\nFinish()\r\n\r\nGetIngredients(){\r\n Get ingredient 1\r\n Get ingredient 2\r\n Get ingredient 3\r\n}<\/pre>\n<p>These sections are very easy to see in many junior developer&#8217;s code, because they&#8217;ve already used comments and line spacing to separate blocks of related code. They just haven&#8217;t broken them out into functions. In Visual Studio however there is no reason not to. The process is usually easily automated via the <a href=\"https:\/\/msdn.microsoft.com\/en-us\/library\/0s21cwxk.aspx\">&#8220;Extract Method&#8221;<\/a> tool.<\/p>\n<p>Second, <strong>removing duplicated instructions<\/strong>, (also know as Don&#8217;t Repeat Yourself or DRY) takes the last step just a bit further:<\/p>\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">GetIngredients(){\r\n  ingredients = &#x5B;1,2,3]\r\n  foreach( var ingredient in ingredients )\r\n    GetIngredient(ingredient)\r\n}\r\n\r\nGetIngredient(i){\r\n  Get ingredient i\r\n}<\/pre>\n<p>Once again junior developers commonly do the same thing to multiple items in single discrete program statements. The fail to use loops (or use lower level loops like &#8216;for&#8217; instead of foreach or a LINQ statement) when those would DRY up their code. If you see multiple statements right after each other doing the same thing, or could copy paste lines changing only a couple of characters, a loop is probably called for.<\/p>\n<p>But the third step, <strong>never remembering more than is required<\/strong>, can flip step one on its head:<\/p>\n<pre class=\"brush: plain; title: ; notranslate\" title=\"\">\r\ningredients = &#x5B;1,2,3]\r\nWorkIngredients(ingredients)\r\nFinish()\r\n\r\nWorkIngredients(ingredients){\r\n  for(var ingredient in ingredients){\r\n   GetIngredient(ingredient)\r\n   PrepareIngredient(ingredient)\r\n  }\r\n}\r\n\r\nFinish(){\r\n  Get plates\r\n  Plate\r\n  Cleanup\r\n  Serve\r\n}<\/pre>\n<p>This needs a bit more explaining. Here we don&#8217;t need to remember a specific ingredient after it has been gotten and prepared. So our code shouldn&#8217;t loop over the ingredients again to pull up the same ingredient twice. While it may look like we wasted time with step one, in many cases it is necessary to see the shape of the program. Only then can we identify the dependency, the specific ingredient, that any section of logic needs to know about. More simply, we also shouldn&#8217;t be pulling out the plates until we are ready to use them, unless we have a very good reason to do so. In real life we only have so much counter space to juggle our plates and ingredients, in programming we only have so much mental space to juggle digital references. We should keep our work space orderly and only use what we need, when we need it. <\/p>\n<p>The trick of all these steps is to make our code more <em>declarative<\/em> and less <em>procedural<\/em>, i.e. it tells us what it does first, and de-emphasizes how it does it. Together, these three steps leave us with a program that quickly tell us what it does, leaves the how in small, easy to grasp functions that we can further refactor into their own separate objects if desired. This doesn&#8217;t make your code perfect, but leads you down the path to understanding and &#8220;smelling&#8221; the other problems in your code&#8217;s readability and maintainability.<\/p>\n<p>When writing this, I struggled to know if I included enough detail to explain these concepts. I also worried if I focused on the right concepts. As someone who often has to teach these ideas I&#8217;m very open to advice on how I could improve this lesson. Please, leave a comment below with your thoughts.<\/p>\n<p>If you are a new or junior developer, and are looking for more help writing good professional business software, please enter your email to sign up for my newsletter <a href=\"http:\/\/eepurl.com\/bYVEJj\" target=\"_blank\" rel=\"noopener\">here<\/a>. I&#8217;m very interested in connecting with you and helping you further your career with future lessons.<\/p>\n<p><a href=\"https:\/\/www.reddit.com\/r\/csharp\/comments\/23w43s\/ive_read_c_for_dummies_still_dont_get_it_is_there\/?st=j0ohfqkw&#038;sh=31db5835\" target=\"_blank\" rel=\"noopener\">Original Reddit Post<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>I recently found a Reddit post from a sysadmin who had just finished their first C# app for work. They were ecstatic, happily telling their CTO about the daily work they had automated for the multiple technicians working under the sysadmin. Then the CTO happily replied with a few words that ruined the sysadmin&#8217;s day. &#8230;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"nf_dc_page":"","jetpack_post_was_ever_published":false,"_jetpack_newsletter_access":"","_jetpack_dont_email_post_to_subs":false,"_jetpack_newsletter_tier_id":0,"_jetpack_memberships_contains_paywalled_content":false,"_jetpack_memberships_contains_paid_content":false,"footnotes":"","jetpack_publicize_message":"","jetpack_publicize_feature_enabled":true,"jetpack_social_post_already_shared":true,"jetpack_social_options":{"image_generator_settings":{"template":"highway","enabled":false},"version":2}},"categories":[2,15],"tags":[],"class_list":["post-152","post","type-post","status-publish","format-standard","hentry","category-c","category-refactoring"],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/p6Os38-2s","_links":{"self":[{"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/posts\/152"}],"collection":[{"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/comments?post=152"}],"version-history":[{"count":5,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/posts\/152\/revisions"}],"predecessor-version":[{"id":620,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/posts\/152\/revisions\/620"}],"wp:attachment":[{"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/media?parent=152"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/categories?post=152"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/langstonsoftware.com\/wp-json\/wp\/v2\/tags?post=152"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}